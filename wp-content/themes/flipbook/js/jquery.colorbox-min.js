(function(a,b,c){function bd(b){if(!V){Q=b;ba();y=a(Q);R=0;if(L.rel!=="nofollow"){y=a("."+g).filter(function(){var b=a.data(this,e).rel||this.rel;return b===L.rel});R=y.index(Q);if(R===-1){y=y.add(Q);R=y.length-1}}if(!T){T=U=true;r.show();if(L.returnFocus){try{Q.blur();a(Q).one(l,function(){try{this.focus()}catch(a){}})}catch(c){}}q.css({opacity:+L.opacity,cursor:L.overlayClose?"pointer":"auto"}).show();L.w=$(L.initialWidth,"x");L.h=$(L.initialHeight,"y");Y.position();if(o){z.bind("resize."+p+" scroll."+p,function(){q.css({width:z.width(),height:z.height(),top:z.scrollTop(),left:z.scrollLeft()})}).trigger("resize."+p)}bb(h,L.onOpen);K.add(D).hide();J.html(L.close).show()}Y.load(true)}}function bc(){var a,b=f+"Slideshow_",c="click."+f,d,e,g;if(L.slideshow&&y[1]){d=function(){G.text(L.slideshowStop).unbind(c).bind(j,function(){if(R<y.length-1||L.loop){a=setTimeout(Y.next,L.slideshowSpeed)}}).bind(i,function(){clearTimeout(a)}).one(c+" "+k,e);r.removeClass(b+"off").addClass(b+"on");a=setTimeout(Y.next,L.slideshowSpeed)};e=function(){clearTimeout(a);G.text(L.slideshowStart).unbind([j,i,k,c].join(" ")).one(c,d);r.removeClass(b+"on").addClass(b+"off")};if(L.slideshowAuto){d()}else{e()}}else{r.removeClass(b+"off "+b+"on")}}function bb(b,c){if(c){c.call(Q)}a.event.trigger(b)}function ba(b){L=a.extend({},a.data(Q,e));for(b in L){if(a.isFunction(L[b])&&b.substring(0,2)!=="on"){L[b]=L[b].call(Q)}}L.rel=L.rel||Q.rel||"nofollow";L.href=L.href||a(Q).attr("href");L.title=L.title||Q.title;L.description=a(Q).attr("data-desc");if(typeof L.href==="string"){L.href=a.trim(L.href)}}function _(a){return L.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function $(a,b){return Math.round((/%/.test(a)?(b==="x"?z.width():z.height())/100:1)*parseInt(a,10))}function Z(c,d,e){e=b.createElement("div");if(c){e.id=f+c}e.style.cssText=d||"";return a(e)}var d={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:false},e="colorbox",f="cbox",g=f+"Element",h=f+"_open",i=f+"_load",j=f+"_complete",k=f+"_cleanup",l=f+"_closed",m=f+"_purge",n=a.browser.msie&&!a.support.opacity,o=n&&a.browser.version<7,p=f+"_IE6",q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y;Y=a.fn[e]=a[e]=function(b,c){var f=this;b=b||{};if(!f[0]){if(f.selector){return f}f=a("<a/>");b.open=true}if(c){b.onComplete=c}f.each(function(){a.data(this,e,a.extend({},a.data(this,e)||d,b));a(this).addClass(g)});if(a.isFunction(b.open)&&b.open.call(f)||b.open){bd(f[0])}return f};Y.init=function(){z=a(c);r=Z().attr({id:e,"class":n?f+(o?"IE6":"IE"):""});q=Z("Overlay",o?"position:absolute":"").hide();s=Z("Wrapper");t=Z("Content").append(A=Z("LoadedContent","width:0; height:0; overflow:hidden"),C=Z("LoadingOverlay").add(Z("LoadingGraphic")),D=Z("Title"),E=Z("Description"),F=Z("Current"),H=Z("Next"),I=Z("Previous"),G=Z("Slideshow").bind(h,bc),J=Z("Close"));s.append(Z().append(Z("TopLeft"),u=Z("TopCenter"),Z("TopRight")),Z(false,"clear:left").append(v=Z("MiddleLeft"),t,w=Z("MiddleRight")),Z(false,"clear:left").append(Z("BottomLeft"),x=Z("BottomCenter"),Z("BottomRight"))).children().children().css({"float":"left"});B=Z(false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(q,r.append(s,B));t.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");M=u.height()+x.height()+t.outerHeight(true)-t.height();N=v.width()+w.width()+t.outerWidth(true)-t.width();O=A.outerHeight(true);P=A.outerWidth(true);r.css({"padding-bottom":M,"padding-right":N}).hide();H.click(function(){Y.next()});I.click(function(){Y.prev()});J.click(function(){Y.close()});K=H.add(I).add(F).add(G);t.children().removeClass("hover");q.click(function(){if(L.overlayClose){Y.close()}});a(b).bind("keydown."+f,function(a){var b=a.keyCode;if(T&&L.escKey&&b===27){a.preventDefault();Y.close()}if(T&&L.arrowKey&&y[1]){if(b===37){a.preventDefault();I.click()}else if(b===39){a.preventDefault();H.click()}}})};Y.remove=function(){r.add(q).remove();a("."+g).removeData(e).removeClass(g)};Y.position=function(a,c){function g(a){u[0].style.width=x[0].style.width=t[0].style.width=a.style.width;C[0].style.height=C[1].style.height=t[0].style.height=v[0].style.height=w[0].style.height=a.style.height}var d=0,e=0;z.unbind("resize."+f);r.hide();if(L.fixed&&!o){r.css({position:"fixed"})}else{d=z.scrollTop();e=z.scrollLeft();r.css({position:"absolute"})}if(L.right!==false){e+=Math.max(z.width()-L.w-P-N-$(L.right,"x"),0)}else if(L.left!==false){e+=$(L.left,"x")}else{e+=Math.round(Math.max(z.width()-L.w-P-N,0)/2)}if(L.bottom!==false){d+=Math.max(b.documentElement.clientHeight-L.h-O-M-$(L.bottom,"y"),0)}else if(L.top!==false){d+=$(L.top,"y")}else{d+=Math.round(Math.max(b.documentElement.clientHeight-L.h-O-M,0)/2)}r.show();a=r.width()===L.w+P&&r.height()===L.h+O?0:a||0;s[0].style.width=s[0].style.height="9999px";r.dequeue().animate({width:L.w+P,height:L.h+O,top:d,left:e},{duration:a,complete:function(){g(this);U=false;s[0].style.width=L.w+P+N+"px";s[0].style.height=L.h+O+M+"px";if(c){c()}setTimeout(function(){z.bind("resize."+f,Y.position)},1)},step:function(){g(this)}})};Y.resize=function(a){if(T){a=a||{};if(a.width){L.w=$(a.width,"x")-P-N}if(a.innerWidth){L.w=$(a.innerWidth,"x")}A.css({width:L.w});if(a.height){L.h=$(a.height,"y")-O-M}if(a.innerHeight){L.h=$(a.innerHeight,"y")}if(!a.innerHeight&&!a.height){L.h=$child.height();$child.replaceWith($child.children())}A.css({height:L.h});Y.position(L.transition==="none"?0:L.speed)}};Y.prep=function(b){function h(){L.h=L.h||A.height();L.h=L.mh&&L.mh<L.h?L.mh:L.h;return L.h}function g(){L.w=L.w||A.width();L.w=L.mw&&L.mw<L.w?L.mw:L.w;return L.w}if(!T){return}var c,d=L.transition==="none"?0:L.speed;A.remove();A=Z("LoadedContent").append(b);A.hide().appendTo(B.show()).css({width:g(),overflow:L.scrolling?"visible":"hidden"}).css({height:h()}).prependTo(t);B.hide();a(S).css({"float":"none"});if(o){a("select").not(r.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(k,function(){this.style.visibility="inherit"})}c=function(){function o(){if(n){r[0].style.removeAttribute("filter")}}var b,c,g,h,i=y.length,k,l;if(!T){return}l=function(){clearTimeout(X);C.hide();bb(j,L.onComplete)};if(n){if(S){A.fadeIn(100)}}D.html(L.title).add(A).show();E.html(L.description).add(A).show();if(i>1){if(typeof L.current==="string"){F.html(L.current.replace("{current}",R+1).replace("{total}",i)).show()}H[L.loop||R<i-1?"show":"hide"]().html(L.next);I[L.loop||R?"show":"hide"]().html(L.previous);b=R?y[R-1]:y[i-1];g=R<i-1?y[R+1]:y[0];if(L.slideshow){G.show()}if(L.preloading){h=a.data(g,e).href||g.href;c=a.data(b,e).href||b.href;h=a.isFunction(h)?h.call(g):h;c=a.isFunction(c)?c.call(b):c;if(_(h)){a("<img/>")[0].src=h}if(_(c)){a("<img/>")[0].src=c}}}else{K.hide()}if(L.iframe){k=a("<iframe/>").addClass(f+"Iframe")[0];if(L.fastIframe){l()}else{a(k).one("load",l)}k.name=f+ +(new Date);k.src=L.href;if(!L.scrolling){k.scrolling="no"}if(n){k.frameBorder=0;k.allowTransparency="true"}a(k).appendTo(A).one(m,function(){k.src="//about:blank"})}else{l()}if(L.transition==="fade"){r.fadeTo(d,1,o)}else{o()}};if(L.transition==="fade"){r.fadeTo(d,0,function(){Y.position(0,c)})}else{Y.position(d,c)}};Y.load=function(b){var c,d,e=Y.prep;U=true;S=false;Q=y[R];if(!b){ba()}bb(m);bb(i,L.onLoad);L.h=L.height?$(L.height,"y")-O-M:L.innerHeight&&$(L.innerHeight,"y");L.w=L.width?$(L.width,"x")-P-N:L.innerWidth&&$(L.innerWidth,"x");L.mw=L.w;L.mh=L.h;if(L.maxWidth){L.mw=$(L.maxWidth,"x")-P-N;L.mw=L.w&&L.w<L.mw?L.w:L.mw}if(L.maxHeight){L.mh=$(L.maxHeight,"y")-O-M;L.mh=L.h&&L.h<L.mh?L.h:L.mh}c=L.href;X=setTimeout(function(){C.show()},100);if(L.inline){Z().hide().insertBefore(a(c)[0]).one(m,function(){a(this).replaceWith(A.children())});e(a(c))}else if(L.iframe){e(" ")}else if(L.html){e(L.html)}else if(_(c)){a(S=new Image).addClass(f+"Photo").error(function(){L.title=false;e(Z("Error").text("This image could not be loaded"))}).load(function(){var a;S.onload=null;if(L.scalePhotos){d=function(){S.height-=S.height*a;S.width-=S.width*a};if(L.mw&&S.width>L.mw){a=(S.width-L.mw)/S.width;d()}if(L.mh&&S.height>L.mh){a=(S.height-L.mh)/S.height;d()}}if(L.h){S.style.marginTop=Math.max(L.h-S.height,0)/2+"px"}if(y[1]&&(R<y.length-1||L.loop)){S.style.cursor="pointer";S.onclick=function(){Y.next()}}if(n){S.style.msInterpolationMode="bicubic"}setTimeout(function(){e(S)},1)});setTimeout(function(){S.src=c},1)}else if(c){B.load(c,L.data,function(b,c,d){e(c==="error"?Z("Error").text("Request unsuccessful: "+d.statusText):a(this).contents())})}};Y.next=function(){if(!U&&y[1]&&(R<y.length-1||L.loop)){R=R<y.length-1?R+1:0;Y.load()}};Y.prev=function(){if(!U&&y[1]&&(R||L.loop)){R=R?R-1:y.length-1;Y.load()}};Y.close=function(){if(T&&!V){V=true;T=false;bb(k,L.onCleanup);z.unbind("."+f+" ."+p);q.fadeTo(200,0);r.stop().fadeTo(300,0,function(){r.add(q).css({opacity:1,cursor:"auto"}).hide();bb(m);A.remove();setTimeout(function(){V=false;bb(l,L.onClosed)},1)})}};Y.element=function(){return a(Q)};Y.settings=d;W=function(a){if(!(a.button!==0&&typeof a.button!=="undefined"||a.ctrlKey||a.shiftKey||a.altKey)){a.preventDefault();bd(this)}};if(a.fn.delegate){a(b).delegate("."+g,"click",W)}else{a("."+g).live("click",W)}a(Y.init)})(jQuery,document,this)